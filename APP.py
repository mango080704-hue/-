import streamlit as st
import random


QUESTION_BANK = [
    {"category":"ç™¼å°„æµç¨‹","question":"ä»¥ä¸‹æ•˜è¿°ä¹‹ç«ç®­æ­£å¼ä¸Šæ¶å‰çš„ç¨‹åºå“ªé …æ­£ç¢º?","options":{"A":"ä¸é ˆé¡å¤–çš„ç¨‹åº","B":"å¯è©¦ä¸Šç™¼å°„æ¶","C":"éœ€å¯©æŸ¥å§”å“¡ç¢ºèª","D":"Bã€Céƒ½æ­£ç¢º"},"answer":"D"},
    {"category":"ç™¼å°„æµç¨‹","question":"ç«ç®­ä¸Šæ¶æº–å‚™è¶…éå¤šä¹…æ™‚é–“ä¾¿æœƒè¦æ±‚é‡æ–°æ’éšŠé€²è¡Œç™¼å°„æº–å‚™?","options":{"A":"30 åˆ†é˜","B":"60 åˆ†é˜","C":"50 åˆ†é˜","D":"75 åˆ†é˜"},"answer":"C"},
    {"category":"ç™¼å°„æµç¨‹","question":"ç«ç®­æ–¼ç™¼å°„æ¶ä¸Šé›»å¾Œèƒ½å¦å†ä¸‹é›»?","options":{"A":"ä»»ä½•æ™‚å€™éƒ½å¯ä»¥","B":"ä¸å¯ä»¥ï¼Œç¶“å¯©æŸ¥å§”å“¡ç¢ºèªå®Œå³ä¸å¯ä¸‹é›»","C":"ä¸å¯ä»¥ï¼Œç¶“éšŠå…§èˆªé›»äººå“¡ç¢ºèªå®Œå³ä¸å¯ä¸‹é›»","D":"å¯ä»¥ï¼Œä½†é ˆå¯©æŸ¥å“¡çš„è¨±å¯"},"answer":"B"},
    {"category":"ç™¼å°„æµç¨‹","question":"å¯©æŸ¥äººå“¡ç™¼å°„è¨±å¯æª¢æŸ¥é …ç›®åŒ…å«å“ªäº›?","options":{"A":"Rail buttonä½æ–¼è³ªå¿ƒå…©å´","B":"ç«ç®­å¤–å‹ç„¡ç•°ç‹€çªèµ·ç‰©","C":"æ‰€æœ‰é›¶ä»¶å·²é–ç·Šå›ºå®š","D":"ä»¥ä¸Šçš†æ˜¯"},"answer":"D"},
    {"category":"ç™¼å°„æµç¨‹","question":"ç«ç®­ç™¼å°„å¾Œï¼Œå›æ”¶çš„æ™‚é–“å€é–“ç‚ºå¤šä¹…?","options":{"A":"1 å°æ™‚","B":"2 å°æ™‚","C":"30 åˆ†é˜","D":"1.5 å°æ™‚"},"answer":"A"},
    {"category":"ç™¼å°„æµç¨‹","question":"ä»¥ä¸‹é—œæ–¼ç™¼å°„æµç¨‹çš„æ•˜è¿°ä½•è€…æ­£ç¢º?","options":{"A":"ç«ç®­ä¸Šæ¶æº–å‚™å®Œæˆå¾Œéœ€å…¨å“¡æ’¤é›¢","B":"åœ¨ä»»ä½•æƒ…æ³ä¸‹çš†å¯ç™¼å°„","C":"ç«ç®­éœ€èƒ½åœ¨è»Œé“ä¸Šæ»‘å‹•ç„¡é˜»ç¤™","D":"Aã€Cæ­£ç¢º"},"answer":"D"},
    {"category":"ç™¼å°„æµç¨‹","question":"å›ºæ…‹ç«ç®­ç™¼å‹•æ©Ÿä½•æ™‚çµ„è£å®Œæˆ?","options":{"A":"ç™¼å°„è¨±å¯å¯©æŸ¥æ™‚é–“","B":"ç«ç®­ä¸Šæ¶æº–å‚™æ™‚é–“","C":"ç«ç®­ç™¼å°„æº–å‚™æ™‚é–“","D":"åœ˜éšŠæŠ€è¡“äº¤æµæ™‚é–“"},"answer":"B"},
    {"category":"ç™¼å°„æµç¨‹","question":"å›ºæ…‹ç«ç®­ç™¼å‹•æ©Ÿé»ç«ç·šè·¯ç”±èª°å®‰è£","options":{"A":"å¯©æŸ¥å§”å“¡","B":"ç«¶è³½ç¾å ´å·¥ä½œäººå“¡","C":"åƒè³½éšŠå“¡","D":"åœ˜éšŠæŒ‡å°å“¡"},"answer":"B"},
    {"category":"ç™¼å°„æµç¨‹","question":"è‹¥å›ºæ…‹ç«ç®­ç™¼å‹•æ©Ÿé»ç«å•Ÿå‹•å¤±æ•—ï¼ˆæœªç‡ƒç‡’ï¼‰è©²å¦‚ä½•è™•ç†","options":{"A":"ç”±ç«¶è³½ç¾å ´å·¥ä½œäººå“¡ç¢ºèªå®‰å…¨","B":"é‡æ–°å®‰è£é»ç«ç·šè·¯ä¸¦ç™¼å°„","C":"å–æ¶ˆä¸¦é‡æ–°æ’éšŠ","D":"Aã€Cæ­£ç¢º"},"answer":"D"},
    {"category":"ç™¼å°„æµç¨‹","question":"ç«ç®­è½æµ·å¾Œç”±èª°æ‰“æ’ˆå›æ”¶","options":{"A":"å¯©æŸ¥å§”å“¡","B":"ç«¶è³½ç¾å ´å·¥ä½œäººå“¡","C":"åƒè³½éšŠå“¡","D":"åœ˜éšŠæŒ‡å°å“¡"},"answer":"B"},
    {"category":"ç™¼å°„æµç¨‹","question":"ç«ç®­è½æµ·æ‰“æ’ˆå¾Œæ–¼å“ªé‚Šä¸Šå²¸","options":{"A":"æ—­æµ·æ¼æ¸¯","B":"ç§‘ç ”ç«ç®­ç™¼å°„å ´","C":"æ²™ç˜","D":"è§€çœ‹å€"},"answer":"A"},
    {"category":"ç™¼å°„æµç¨‹","question":"åƒè³½éšŠå“¡æ’¤é›¢å¾Œä½•è€…éŒ¯èª¤","options":{"A":"æ–¼å®‰å…¨å€è§€çœ‹","B":"æ³¨æ„ç™¼å°„å‹•æ…‹","C":"é€²è¡Œç™¼å°„ç¨‹åº","D":"æ‹æ”"},"answer":"C"},

    {"category":"ç«ç®­ç³»çµ±","question":"ç‚ºä»€éº¼è£½ä½œç«ç®­é€šå¸¸æœƒå»ºè­°é–‹ä¸€å€‹å°æ´åœ¨åˆ†ç¯€æ®µ?","options":{"A":"é™è½å‚˜","B":"ç´€éŒ„æ°£å£“","C":"é‡‹æ”¾å…§å£“é¿å…éæ—©è„«ç¯€","D":"çµ„è£è¨˜è™Ÿ"},"answer":"C"},
    {"category":"ç«ç®­ç³»çµ±","question":"ä½¿ç”¨å£“åŠ›è¨ˆæ™‚ç‚ºä½•éœ€åœ¨èˆªé›»æ®µé–‹å­”?","options":{"A":"æ¸›å°‘ç¬é–“å½±éŸ¿","B":"ç´€éŒ„æ°£å£“","C":"é‡‹æ”¾å…§å£“","D":"é›»æ± è¨˜è™Ÿ"},"answer":"B"},
    {"category":"ç«ç®­ç³»çµ±","question":"å…¬ç‰ˆå›ºæ…‹ç«ç®­ç™¼å‹•æ©Ÿæœ€å¤§æ¨åŠ›ç‚ºå¤šå°‘å…¬æ–¤é‡?","options":{"A":"200","B":"100","C":"1000","D":"400"},"answer":"A"},
    {"category":"ç«ç®­ç³»çµ±","question":"ç«ç®­å‹•æ…‹ç©©å®šæ€§è‡³å°‘éœ€å¤§æ–¼å¤šå°‘?","options":{"A":"2","B":"1","C":"1.5","D":"3"},"answer":"C"},
    {"category":"ç«ç®­ç³»çµ±","question":"ç„¡å°æ§ç«ç®­è¨­è¨ˆæ™‚æ°£å£“ä¸­å¿ƒéœ€ä½æ–¼è³ªå¿ƒå“ª?","options":{"A":"å¾Œæ–¹","B":"å‰æ–¹","C":"é‡åˆ","D":"ç„¡é—œ"},"answer":"A"},
    {"category":"ç«ç®­ç³»çµ±","question":"å¦‚ä½•è®“ä¸ç©©å®šç«ç®­è®Šç©©å®š?","options":{"A":"é¼»éŒå¢é‡","B":"é¼»éŒæ¸›é‡","C":"å°¾ç¿¼å‰ç§»","D":"ç¸®çŸ­ç®­é•·"},"answer":"A"},
    {"category":"ç«ç®­ç³»çµ±","question":"ç«ç®­åœ¨åŠ é€Ÿæ™‚æœƒè¶¨å‘?","options":{"A":"é€æ¼¸ç©©å®š","B":"é€æ¼¸ä¸ç©©","C":"ä¸å½±éŸ¿","D":"è®Šä¸ç©©"},"answer":"A"},
    {"category":"ç«ç®­ç³»çµ±","question":"å°¾ç¿¼é€šå¸¸å»ºè­°å¦‚ä½•å›ºå®š?","options":{"A":"é»è²¼å¤–æ®¼","B":"é‡˜å­","C":"ç©¿æ®¼å›ºå®š","D":"çš†å¯"},"answer":"C"},
    {"category":"ç«ç®­ç³»çµ±","question":"é›¢æ¶ç©©å®šæ€§éœ€å°æ–¼å¤šå°‘?","options":{"A":"6","B":"4","C":"2","D":"1.5"},"answer":"B"},
    {"category":"ç«ç®­ç³»çµ±","question":"è»Œé“æ»‘å¡Šæ­£ç¢ºæ•˜è¿°?","options":{"A":"è³ªå¿ƒå‰å¾Œå„ä¸€","B":"å¯3Dåˆ—å°","C":"ä¸é ˆè€ƒæ…®èˆªé›»","D":"å¯ç”¨è† å›ºå®š"},"answer":"A"},
    {"category":"ç«ç®­ç³»çµ±","question":"ç«ç®­ä¸»çµæ§‹éœ€æ‰¿å—ä»€éº¼?","options":{"A":"ç„¡é ˆè€ƒæ…®","B":"åƒ…åœ°é¢","C":"é£›è¡Œæ‡‰åŠ›","D":"æ¬é‹"},"answer":"C"},
    {"category":"ç«ç®­ç³»çµ±","question":"æ°£å£“ä¸­å¿ƒå¯å¦‚ä½•å¾—å‡º?","options":{"A":"ç†è«–","B":"æ¨¡æ“¬è»Ÿé«”","C":"ç§¤å°","D":"Aã€B"},"answer":"D"},
    {"category":"ç«ç®­ç³»çµ±","question":"ç«ç®­ç³»çµ±ä¸‰å¤§é¡?","options":{"A":"çµæ§‹ã€èˆªé›»ã€æ¨é€²","B":"èˆªé›»ã€é¼»éŒã€æ¨é€²","C":"çµæ§‹ã€å¤©ç·šã€å™´å˜´","D":"çµæ§‹ã€é¼»éŒã€å™´å˜´"},"answer":"A"},
    {"category":"ç«ç®­ç³»çµ±","question":"é£›è¡Œæ¨¡æ“¬ç›®çš„?","options":{"A":"è»Œè·¡è¨­è¨ˆ","B":"å—åŠ›ä¼°ç®—","C":"é£›å¾Œåˆ†æ","D":"ä»¥ä¸Šçš†æ˜¯"},"answer":"D"},
    {"category":"ç«ç®­ç³»çµ±","question":"ä»»å‹™è¦åŠƒæ­£ç¢ºé †åº?","options":{"A":"ç™¼å°„â†’é–‹å‚˜â†’æ…£æ€§","B":"æ…£æ€§â†’çµæŸâ†’è½åœ°","C":"æ…£æ€§â†’é–‹å‚˜â†’è½åœ°","D":"ç™¼å°„â†’é–‹å‚˜â†’çµæŸ"},"answer":"C"},
    {"category":"ç«ç®­ç³»çµ±","question":"å°¾ç¿¼é¡«æŒ¯é€Ÿåº¦è‡³å°‘é«˜æ–¼æœ€å¤§é€Ÿåº¦å¤šå°‘?","options":{"A":"10%","B":"25%","C":"50%","D":"100%"},"answer":"C"},
    {"category":"ç«ç®­ç³»çµ±","question":"ä¸€å®šè¦åšçš„èˆªé›»æ¸¬è©¦?","options":{"A":"è¡æ“ŠæŒ¯å‹•","B":"æº«å¾ª","C":"çœŸç©º","D":"å™ªéŸ³"},"answer":"A"},
    {"category":"ç«ç®­ç³»çµ±","question":"æµ·é¢å›æ”¶çµ‚ç«¯é€Ÿåº¦å»ºè­°ä½æ–¼?","options":{"A":"10","B":"11","C":"12","D":"13"},"answer":"C"},
    {"category":"ç«ç®­ç³»çµ±","question":"èˆªé›»é›»æ± éœ€ä¾›é›»è‡³å°‘å¤šä¹…?","options":{"A":"0.5","B":"1","C":"1.5","D":"2"},"answer":"C"},
    {"category":"ç«ç®­ç³»çµ±","question":"ä½•è€…éå…è¨±å„²èƒ½è£ç½®?","options":{"A":"é«˜å£“æ°£ç“¶","B":"é»‘è‰²ç«è—¥","C":"ç…™éœ§æ£’","D":"å½ˆç°§"},"answer":"B"},
    {"category":"ç«ç®­ç³»çµ±","question":"3Kçµ„ç«ç®­ç¸½é‡ä¸å¾—è¶…é?","options":{"A":"20","B":"25","C":"28.5","D":"30.5"},"answer":"C"},
    {"category":"ç«ç®­ç³»çµ±","question":"ç¦ç”¨ææ–™ç‚º?","options":{"A":"ç»ç’ƒçº–ç¶­","B":"PVC","C":"é‹","D":"é‰›"},"answer":"D"},

    {"category":"ç™¼å°„å®‰å…¨","question":"ç¦æ­¢è¡Œç‚º?","options":{"A":"é£²é…’","B":"å½±éŸ¿åˆ¤æ–·è—¥ç‰©","C":"æ‰‹æ©Ÿé€šè©±","D":"Aã€B"},"answer":"D"},
    {"category":"ç™¼å°„å®‰å…¨","question":"å»ºè­°æ”œå¸¶è£å‚™?","options":{"A":"æ»…ç«å™¨","B":"æ€¥æ•‘ç®±","C":"å…©è€…","D":"å…©è€…åŠ è¯çµ¡"},"answer":"D"},
    {"category":"ç™¼å°„å®‰å…¨","question":"å°„å ´ç’°å¢ƒç¢ºèªåŒ…å«?","options":{"A":"åœ°éœ‡","B":"é¢¨é€Ÿ","C":"æ¿ƒéœ§","D":"ä»¥ä¸Šçš†æ˜¯"},"answer":"D"},
    {"category":"ç™¼å°„å®‰å…¨","question":"äººå“¡è·é›¢è‡³å°‘?","options":{"A":"50","B":"80","C":"100","D":"150"},"answer":"C"},
    {"category":"ç™¼å°„å®‰å…¨","question":"æœ€å¤§å…è¨±é¢¨é€Ÿ?","options":{"A":"6","B":"7","C":"8","D":"15"},"answer":"A"},
    {"category":"ç™¼å°„å®‰å…¨","question":"ç™¼å°„æ¶ä»°è§’ä¸Šé™?","options":{"A":"88","B":"86","C":"85","D":"83"},"answer":"C"},
    {"category":"ç™¼å°„å®‰å…¨","question":"é»ç«å¾Œç•™åœ¨æ¶ä¸Šæ‡‰?","options":{"A":"æ»…ç«","B":"ç­‰ç‡ƒç›¡","C":"æ‹‰å°é–ç·š","D":"ä»¥ä¸Šçš†é"},"answer":"B"},
    {"category":"ç™¼å°„å®‰å…¨","question":"æ•´å‚™æœŸé–“ä½•è€…éŒ¯èª¤?","options":{"A":"è­·ç›®é¡","B":"é˜²å‰²æ‰‹å¥—","C":"å®‰å…¨å¸½","D":"æ‹›å¾…è¨ªå®¢"},"answer":"D"},
    {"category":"ç™¼å°„å®‰å…¨","question":"ä¸ç¢ºå®šå•é¡Œè™•ç†æ–¹å¼ä½•è€…éŒ¯?","options":{"A":"è‡ªè¡Œè™•ç†","B":"å•æŒ‡å°å“¡","C":"å•ç¾å ´äººå“¡","D":"å•å¯©æŸ¥"},"answer":"A"},
    {"category":"ç™¼å°„å®‰å…¨","question":"è»Šè¼›åœæ”¾è¦å®šä½•è€…æ­£ç¢º?","options":{"A":"å¯åœç®¡åˆ¶å…§","B":"é»ç«å¾Œå¯ç§»å‹•","C":"é ˆåœç®¡åˆ¶å¤–","D":"ç„¡è¦å®š"},"answer":"C"},

    {"category":"é¢¨éšªç®¡ç†","question":"é¢¨éšªç®¡ç†ç›®çš„?","options":{"A":"ç™¼ç¾é¢¨éšª","B":"é™ä½é¢¨éšª","C":"å½¢æˆç¶“é©—","D":"ä»¥ä¸Šçš†æ˜¯"},"answer":"D"},
    {"category":"é¢¨éšªç®¡ç†","question":"ä½•è€…å„ªå…ˆè™•ç†?","options":{"A":"åš´é‡9 ç™¼ç”Ÿ3","B":"åš´é‡3 ç™¼ç”Ÿ9","C":"åš´é‡3 é›£æª¢9","D":"åš´é‡3 ç™¼ç”Ÿ3"},"answer":"A"},
    {"category":"é¢¨éšªç®¡ç†","question":"DFMEAä¸åŒ…å«?","options":{"A":"æˆæœ¬","B":"æª¢æ¸¬æ€§","C":"äººèº«å±éšª","D":"ç™¼ç”Ÿç‡"},"answer":"A"},
    {"category":"é¢¨éšªç®¡ç†","question":"æ­£ç¢ºæ¨™æº–åŒ–è§€å¿µ?","options":{"A":"è¨‚å®¹è¨±èª¤å·®","B":"å…æ ¡é©—","C":"å¯ç›´æ¥æ”¹SOP","D":"ä»¥ä¸Šçš†æ˜¯"},"answer":"A"},
    {"category":"é¢¨éšªç®¡ç†","question":"FMEAé©ç”¨ç¯„åœ?","options":{"A":"æ–°ç”¢å“","B":"è®Šæ›´è¨­è¨ˆ","C":"ä¿®æ”¹æƒ…å¢ƒ","D":"ä»¥ä¸Šçš†æ˜¯"},"answer":"D"}
]


RULES = {"ç™¼å°„æµç¨‹":8,"ç«ç®­ç³»çµ±":20,"ç™¼å°„å®‰å…¨":8,"é¢¨éšªç®¡ç†":4}


def generate_exam():
    exam=[]
    for c,n in RULES.items():
        pool=[q for q in QUESTION_BANK if q["category"]==c]
        exam+=random.sample(pool,n)
    random.shuffle(exam)
    return exam


st.title("ç«ç®­æ¸¬é©—ç³»çµ±")

if "exam" not in st.session_state:
    st.session_state.exam = generate_exam()
    st.session_state.answers = {}

exam = st.session_state.exam


for i, q in enumerate(exam, 1):
    st.subheader(f"{i}. {q['question']}")
    choice = st.radio(
        label="è«‹é¸æ“‡ç­”æ¡ˆ",
        options=list(q["options"].keys()),
        format_func=lambda x: f"{x}. {q['options'][x]}",
        key=f"q{i}"
    )
    st.session_state.answers[i] = choice


if st.button("ğŸ“¨ äº¤å·"):
    correct = 0
    wrong = []

    for i, q in enumerate(exam, 1):
        if st.session_state.answers[i] == q["answer"]:
            correct += 1
        else:
            wrong.append((q, st.session_state.answers[i]))

    total = len(exam)
    st.success(f"ç­”å° {correct} / {total} é¡Œ")
    st.write("çµæœï¼š", "é€šé" if correct >= 35 else "æœªé€šé")

    if wrong:
        st.error("éŒ¯é¡Œå›é¡§ï¼š")
        for q, a in wrong:
            st.write("é¡Œç›®ï¼š", q["question"])
            st.write("ä½ çš„ç­”æ¡ˆï¼š", a, "ï½œæ­£ç¢ºç­”æ¡ˆï¼š", q["answer"])
            st.write("---")
